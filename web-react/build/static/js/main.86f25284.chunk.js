(this["webpackJsonpreact-expenses-v2"]=this["webpackJsonpreact-expenses-v2"]||[]).push([[0],{36:function(e,a,t){e.exports=t(65)},64:function(e,a,t){},65:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),s=t(33),o=t.n(s),c=t(11),r=t(15),i=t(14),m=t(6),u=t(7),d=t(9),h=t(8),b=t(3),p=t(10),E=(t(23),t(2)),v=t.n(E),f=t(18),g=t.n(f),N=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(t=Object(d.a)(this,(e=Object(h.a)(a)).call.apply(e,[this].concat(l)))).state={Number:0,title:"",bname:"",bday:""},t.validateForm=function(e,a,t,n){return e&&a&&t&&n?isNaN(a)&&isNaN(t)?e<0?(window.alert("No Book Number"),!1):!g()().isAfter(n)||(window.alert("Please check your returned date!!!"),!1):(window.alert("Please fill only TEXT detail in transaction name."),!1):(window.alert("Please fill in ALL data fields."),!1)},t.onChange=function(e){t.setState(Object(i.a)({},e.target.name,e.target.value))},t.onSubmit=function(e){if(e.preventDefault(),t.validateForm(t.state.Number,t.state.title,t.state.bname,t.state.bday)){var a=localStorage.getItem("myData");v.a.post("http://localhost:5000/api/v3/transactions",{book:t.state.bname,title:t.state.title,number:t.state.Number,updated:t.state.bday},{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){alert("Add Success!!!"),window.location.reload(!1)}))}},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"container mt-4 mb-5"},l.a.createElement("label",{className:"label"},"Loan Book"),l.a.createElement("div",{className:"columns is-centered"},l.a.createElement("div",{className:"column is-half"},l.a.createElement("form",{id:"add-transaction_form",onSubmit:this.onSubmit},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"bname"},"Book Name"),l.a.createElement("input",{type:"text",name:"bname",className:"form-control",onChange:this.onChange,value:this.state.name})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"title"},"Book Title"),l.a.createElement("input",{type:"text",name:"title",className:"form-control",onChange:this.onChange,value:this.state.title})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"Number"},"Book Number"),l.a.createElement("input",{type:"number",name:"Number",className:"form-control",onChange:this.onChange,value:this.state.Number})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",for:"date"},"Due Date"),l.a.createElement("input",{type:"date",name:"bday",required:!0,pattern:"\\d{4}-\\d{2}-\\d{2}",onChange:this.onChange,className:"form-control",value:this.state.bday})),l.a.createElement("input",{type:"submit",value:"Add Book",className:"button is-info is-focused"})))))}}]),a}(n.Component);function y(e){var a=new Date(e);return a.getDate()+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()]+" "+(a.getYear()+1900)}var w=function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.transaction.book),l.a.createElement("td",null,e.transaction.title),l.a.createElement("td",null,e.transaction.number),l.a.createElement("td",null,y(e.transaction.created)),l.a.createElement("td",null,y(e.transaction.updated)),l.a.createElement("td",null,l.a.createElement(c.b,{to:"/edit/"+e.transaction._id},"edit")," | ",l.a.createElement("a",{href:"#",onClick:function(){e.delectBook(e.transaction._id)}},"delete")))},k=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(d.a)(this,Object(h.a)(a).call(this,e))).delectBook=t.delectBook.bind(Object(b.a)(t)),t.state={transactions:[]},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=localStorage.getItem("myData");v.a.get("http://localhost:5000/api/v3/transactions",{headers:{Authorization:"Bearer ".concat(a)}}).then((function(a){e.setState({transactions:a.data})})).catch((function(e){console.log(e)}))}},{key:"delectBook",value:function(e){var a=localStorage.getItem("myData");v.a.delete("http://localhost:5000/api/v3/transactions/"+e,{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){console.log(e.data)})),this.setState({transactions:this.state.transactions.filter((function(a){return a._id!==e}))})}},{key:"transactionList",value:function(){var e=this;return this.state.transactions.map((function(a){return l.a.createElement(w,{transaction:a,delectBook:e.delectBook,key:a._id})}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"container mt-4 mb-5"},l.a.createElement("label",{className:"label"},"Loan Book History"),l.a.createElement("table",{className:"table table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Book"),l.a.createElement("th",null,"title"),l.a.createElement("th",null,"number"),l.a.createElement("th",null,"Loan date"),l.a.createElement("th",null,"Returned date"),l.a.createElement("th",null,"Actions"))),l.a.createElement("tbody",null,this.transactionList())))}}]),a}(n.Component);function C(){return l.a.createElement("div",null,l.a.createElement("div",{className:"container mt-3"},l.a.createElement("label",{className:"label"},"Developer information"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"card"},l.a.createElement("img",{src:"/2shot2.jpg",className:"card-img-top",alt:"..."}),l.a.createElement("div",{className:"card-body"},l.a.createElement("h4",{class:"card-title"},"Manager"),l.a.createElement("p",{class:"card-text"},"Weerachai Sarakun (610610614)")))),l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"card"},l.a.createElement("img",{src:"/88576.jpg",className:"card-img-top",alt:"..."}),l.a.createElement("div",{className:"card-body"},l.a.createElement("h4",{class:"card-title"},"Manager"),l.a.createElement("p",{class:"card-text"},"Inthanin Panching (610610626)")))))))}var S=function(e){return l.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},l.a.createElement("div",{id:"navbarBasicExample",className:"navbar-menu"},l.a.createElement("div",{className:"navbar-start"},l.a.createElement(c.b,{to:"/add"},l.a.createElement("button",{className:"button is-light"},"Home")),l.a.createElement(c.b,{to:"/about"},l.a.createElement("button",{className:"button is-light"},"Developer"))),l.a.createElement("div",{className:"navbar-end"},l.a.createElement("div",{className:"navbar-item"},l.a.createElement("div",{className:"buttons"},l.a.createElement("h3",{className:"navbar-item"},e.username),l.a.createElement(c.b,{to:"/history"},l.a.createElement("button",{className:"button is-light"},"History")),l.a.createElement(c.b,{to:"/setting"},l.a.createElement("button",{className:"button is-light"},"Edit")),l.a.createElement("button",{className:"button is-light",onClick:e.logout},"Logout"))))))},j=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(d.a)(this,Object(h.a)(a).call(this,e))).onChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(i.a)({},n,l))},t.clearForm=function(){t.setState({name:"",fname:"",lname:""})},t.state={id:"",fname:"",lname:"",name:"",email:"",password:"",comfirmpassword:""},t.clearForm=t.clearForm.bind(Object(b.a)(t)),t.onSubmit=t.onSubmit.bind(Object(b.a)(t)),t.onChange=t.onChange.bind(Object(b.a)(t)),t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=localStorage.getItem("myData");if(null!=a){v.a.get("http://localhost:5000/api/v3/users/me",{headers:{Authorization:"Bearer ".concat(a)}}).then((function(a){console.log(a),console.log(a.data),e.setState({name:a.data.user.name,fname:a.data.user.fname,lname:a.data.user.lname,email:a.data.user.email,id:a.data.user._id})}))}}},{key:"onSubmit",value:function(e){e.preventDefault();var a=localStorage.getItem("myData");null!=a&&this.state.comfirmpassword===this.state.password?v.a.put("http://localhost:5000/api/v3/users/edit/"+this.state.id,{fname:this.state.fname,lname:this.state.lname,name:this.state.name,password:this.state.password},{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){console.log(e),console.log(e.data),alert("Update successful"),window.location.reload(!1)})):window.alert("Password Not Same!!!")}},{key:"render",value:function(){return l.a.createElement("div",{className:"container mt-4 mb-5"},l.a.createElement("label",{className:"label"},"Profile"),l.a.createElement("div",{className:"columns is-centered"},l.a.createElement("div",{className:"column is-half"},l.a.createElement("form",{onSubmit:this.onSubmit},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"First Name"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"form-control",onChange:this.onChange,type:"text",name:"fname",value:this.state.fname})))," ",l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Last Name"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"form-control",onChange:this.onChange,type:"text",name:"lname",value:this.state.lname}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"User Name"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"form-control",onChange:this.onChange,type:"text",name:"name",value:this.state.name}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Email"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"form-control",type:"email",name:"email",value:this.state.email,readonly:"readonly"}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Password"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"form-control",onChange:this.onChange,type:"password",name:"password",value:this.state.password}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Comfirm Password"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"form-control",onChange:this.onChange,type:"password",name:"comfirmpassword",value:this.state.comfirmpassword}))),l.a.createElement("div",{className:"field is-grouped"},l.a.createElement("div",{className:"control"},l.a.createElement("input",{type:"button",value:"Default",className:"button is-danger is-focused",onClick:this.clearForm})),l.a.createElement("div",{className:"control"},l.a.createElement("input",{type:"submit",value:"Save",className:"button is-success is-focused"})))))))}}]),a}(n.Component),O=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(d.a)(this,Object(h.a)(a).call(this,e))).validateForm=function(e,a,t,n){return e&&a&&t&&n?isNaN(a)&&isNaN(t)?e<0?(window.alert("No Book Number"),!1):!g()().isAfter(n)||(window.alert("Please check your returned date!!!"),!1):(window.alert("Please fill only TEXT detail in transaction name."),!1):(window.alert("Please fill in ALL data fields."),!1)},t.onChangebook=t.onChangebook.bind(Object(b.a)(t)),t.onChangetitle=t.onChangetitle.bind(Object(b.a)(t)),t.onChangenumber=t.onChangenumber.bind(Object(b.a)(t)),t.onChangeupdated=t.onChangeupdated.bind(Object(b.a)(t)),t.onSubmit=t.onSubmit.bind(Object(b.a)(t)),t.state={book:"",title:"",number:0,upupdatedd:new Date,users:[]},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=localStorage.getItem("myData");v.a.get("http://localhost:5000/api/v3/transactions/"+this.props.match.params.id,{headers:{Authorization:"Bearer ".concat(a)}}).then((function(a){e.setState({book:a.data.book,title:a.data.title,number:a.data.number,updated:new Date(a.data.updated)})})).catch((function(e){console.log(e)}))}},{key:"onChangebook",value:function(e){this.setState({book:e.target.value})}},{key:"onChangetitle",value:function(e){this.setState({title:e.target.value})}},{key:"onChangenumber",value:function(e){this.setState({number:e.target.value})}},{key:"onChangeupdated",value:function(e){this.setState({updated:e})}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.validateForm(this.state.number,this.state.title,this.state.book,this.state.updated)){var a={book:this.state.book,title:this.state.title,number:this.state.number,updated:this.state.updated},t=localStorage.getItem("myData");v.a.put("http://localhost:5000/api/v3/transactions/"+this.props.match.params.id,a,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){console.log(e),console.log(e.data)})),window.location="/"}}},{key:"render",value:function(){return l.a.createElement("div",{className:"container mt-4 mb-5"},l.a.createElement("label",{className:"label"},"Edit Loan Book"),l.a.createElement("form",{onSubmit:this.onSubmit},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label"},"Book: "),l.a.createElement("input",{type:"text",required:!0,className:"form-control",value:this.state.book,onChange:this.onChangebook})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label"},"Title: "),l.a.createElement("input",{type:"text",required:!0,className:"form-control",value:this.state.title,onChange:this.onChangetitle})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label"},"Number: "),l.a.createElement("input",{type:"number",className:"form-control",value:this.state.number,onChange:this.onChangenumber})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",for:"date"},"Due Date:"),l.a.createElement("div",null,l.a.createElement("input",{type:"date",name:"bday",required:!0,pattern:"\\d{4}-\\d{2}-\\d{2}",onChange:this.onChange,className:"form-control",value:this.state.bday}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"submit",value:"Edit Loan Book",className:"button is-info is-focused"}))))}}]),a}(n.Component),D=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(d.a)(this,Object(h.a)(a).call(this,e))).onChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(i.a)({},n,l))},t.onSubmit=function(e){e.preventDefault(),v.a.post("http://localhost:5000/api/v3/users/login",{email:t.state.email,password:t.state.password}).then((function(e){localStorage.setItem("myData",e.data.token),t.setState({check:!0}),t.componentDidMount()})).catch((function(e){e.response&&(window.alert("Login failed, please check your credentials"),window.location.reload(!1))}))},t.reg=function(){t.setState({reg:!0})},t.state={email:"",password:"",check:!1,logout:!1,reg:!1,transactions:[]},t.logout=t.logout.bind(Object(b.a)(t)),t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(null!==localStorage.getItem("myData")){this.setState({check:!0});var a=localStorage.getItem("myData");v.a.get("http://localhost:5000/api/v3/transactions",{headers:{Authorization:"Bearer ".concat(a)}}).then((function(a){e.setState({transactions:a.data})})).catch((function(e){console.log(e)}))}}},{key:"logout",value:function(){var e=this,a=localStorage.getItem("myData");v.a.get("http://localhost:5000/api/v3/users/logout",{headers:{Authorization:"Bearer ".concat(a)}}).then((function(a){localStorage.clear(),e.setState({logout:!0}),window.location.reload(!1)}))}},{key:"render",value:function(){return this.state.logout?(this.setState({logout:!1}),l.a.createElement(r.a,{to:"/"})):this.state.reg?l.a.createElement(r.a,{to:"/Register"}):!0===this.state.check?l.a.createElement(c.a,null,l.a.createElement(r.a,{to:"/add"}),l.a.createElement("div",{className:"container mt-4 mb-5"},l.a.createElement(S,{logout:this.logout}),l.a.createElement(r.b,{path:"/add",component:N}),l.a.createElement(r.b,{path:"/history",component:k}),l.a.createElement(r.b,{path:"/edit/:id",component:O}),l.a.createElement(r.b,{path:"/about",component:C}),l.a.createElement(r.b,{path:"/setting",component:j}))):l.a.createElement("section",{className:"section container"},l.a.createElement("div",{className:"columns is-centered "},l.a.createElement("div",{className:"column is-half"},l.a.createElement("form",{onSubmit:this.onSubmit},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label head"},"Email"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"email",name:"email",onChange:this.onChange}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label head"},"Password"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"password",name:"password",onChange:this.onChange}))),l.a.createElement("div",{className:"field is-grouped"},l.a.createElement("div",{className:"control"},l.a.createElement("input",{type:"submit",defaultValue:"LogIn",className:"button is-link"})),l.a.createElement("div",{className:"control"},l.a.createElement("button",{className:"button is-link",onClick:this.reg},"Register")))))))}}]),a}(l.a.Component),B=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(t=Object(d.a)(this,(e=Object(h.a)(a)).call.apply(e,[this].concat(l)))).state={fname:"",lname:"",name:"",email:"",password:"",comfirmpassword:"",success:!1},t.onChange=function(e){t.setState(Object(i.a)({},e.target.name,e.target.value))},t.validateForm=function(e,a,t,n,l,s){return e&&a&&t&&n&&l&&s?isNaN(e)&&isNaN(a)&&isNaN(t)?l===s||(window.alert("Password Not Same!!!"),!1):(window.alert("Please fill only TEXT detail in transaction name."),!1):(window.alert("Please fill in ALL data fields."),!1)},t.onSubmit=function(e){e.preventDefault(),t.validateForm(t.state.fname,t.state.lname,t.state.name,t.state.email,t.state.password,t.state.comfirmpassword)&&v.a.post("http://localhost:5000/api/v3/users",{fname:t.state.fname,lname:t.state.lname,name:t.state.name,email:t.state.email,password:t.state.password}).then((function(e){console.log(e),console.log(e.data),t.setState({success:!0})})).catch((function(e){window.alert("Register failed, please check your email and password"),e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e)}))},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){return this.state.success?l.a.createElement(D,null):l.a.createElement("section",{className:"section container"},l.a.createElement("div",{className:"columns is-centered"},l.a.createElement("div",{className:"column is-half"},l.a.createElement("form",{onSubmit:this.onSubmit},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"First Name"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"name",name:"fname",onChange:this.onChange}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Last Name"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"name",name:"lname",onChange:this.onChange}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"User Name"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"name",name:"name",onChange:this.onChange}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Email"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"email",name:"email",onChange:this.onChange}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Password"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"password",name:"password",onChange:this.onChange}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Comfirm Password"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"password",name:"comfirmpassword",onChange:this.onChange}))),l.a.createElement("div",{className:"field is-grouped"},l.a.createElement("div",{className:"control"},l.a.createElement("input",{type:"submit",defaultValue:"LogIn",className:"button is-link"})),l.a.createElement("a",{href:"/",className:"button is-link"},"Home"))))))}}]),a}(n.Component);t(64);var A=function(){return l.a.createElement("div",null,l.a.createElement(c.a,null,l.a.createElement("div",{className:"bg"},l.a.createElement(r.b,{path:"/",component:D}),l.a.createElement(r.b,{path:"/Register",component:B}))))};o.a.render(l.a.createElement(A,null),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.86f25284.chunk.js.map